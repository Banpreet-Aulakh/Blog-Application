<%- include('partials/header') %>


<% if (typeof route !== 'undefined' && route === '/create-post') { %>
<div class="post-form">
  <h1>Create New Post</h1>
  <form action="/create-post" method="POST">
    <div class="form-group">
      <label for="title">Post Title:</label>
      <input type="text" id="title" name="title" required>
    </div>
    <div class="form-group">
      <label for="content">Post Content:</label>
      <textarea id="content" name="content" rows="10" required></textarea>
    </div>
    <button type="submit">Create Post</button>
  </form>
</div>
<% } else { %>
<div class="post-container">
  <h1>Your Posts</h1>
  <% if (locals.posts === undefined || locals.posts.length === 0) { %>
  <p>Make some posts I'm lonely :(</p>  <% } else { %><% for (let i = 0; i < locals.posts.length; i++) { %>
  <div class="post">    <form action="/delete-post" method="POST" class="delete-form">
      <input type="hidden" name="postId" value=<%= posts[i].id %>>
      <button type="submit" class="delete-button">&times</button>
    </form>    
    <form action="/edit-post" method="GET" class="edit-form">
      <input type="hidden" name="postId" value=<%= posts[i].id %>>
      <button type="submit" class="edit-button">✏️</button>
    </form>
    <h2><%= posts[i].title %></h2>
    <p><%= posts[i].content %></p>
    <small>Posted on: <%= new Date(posts[i].timestamp).toLocaleString() %></small>
  </div>
  <% } %> 
  <% } %>
</div>
<% } %>

<%- include('partials/footer') %>